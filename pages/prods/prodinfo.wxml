<view wx:if="{{canshow}}">
  <view class="topbar" style="height: {{menuheight}}px;background-color: {{barcolor}};">
    <image class="weui-navigation-bar__btn_goback back" src="/static/imgs/back.png" bind:tap="back" mode="" />
    <view class="title" style="margin-top:{{menutop}}px">
  <image class="logo" src="{{imgpre}}{{setinfo.toplogo}}" mode="heightFix"/>
    </view>
  </view>
  <view class="container" style="margin-top: {{menuheight}}px;">
    <!-- 图片轮播区域 -->
    <view class="swipcon">
      <swiper class="product-image-swiper" autoplay="false" interval="5000" duration="500" circular="{{true}}" bindchange="update">
        <block wx:for="{{swiperitem}}" wx:key="index">
          <swiper-item>
            <block wx:if="{{item.type=='img'}}">
                <image
                    src="{{imgpre}}{{item.value}}"
                    mode="aspectFill"
                    data-index="{{index}}"
                    bindtap="previewImage"
                ></image>
            </block>
            <block wx:if="{{item.type=='video'}}">
                <video class="full-screen-video" autoplay="{{idx=='0'}}" id="video-{{idx}}"  loop="true" controls="{{false}}" src="{{imgpre}}{{item.value}}"/>
            </block>
          </swiper-item>
        </block>
      </swiper>
      <view class="pages" hidden="{{true}}">{{swpindex}}/{{imageUrls.length}}</view>
      <!-- <image class="resize" bind:tap="previewImage" data-index="{{swpindex-1}}" src="/static/imgs/resize.png" mode="" /> -->
      <view class="tc more">滑动浏览更多</view>
    </view>
    <!-- 同类商品区 -->
    <view class="samebox">
      <view class="sameson {{item.pid==pid?'choose':''}}" wx:for="{{prodsinfo.bindpinfo}}" wx:key="index" data-pid="{{item.pid}}" bindtap="gotoprod" data-ifgo="{{item.pid!=pid}}">
        <image class="samesonimg" src="{{imgpre}}{{item.imgs}}" mode="aspectFill"/>
      </view>
    </view>

    <view class="product-info">
      <!-- 商品标题区域 -->
      <view class="product-title">
        <!-- <text class="season-tag">{{prodsinfo.tags}}</text> -->
        <text class="product-name">{{prodsinfo.pname}}</text>
        <text class="product-subname">{{prodsinfo.mark}}</text>
      </view>
      <view class="product-title">
        <text class="product-name">商品信息</text>
        <text class="product-subname">型号：{{prodsinfo.pcode}}</text>
        <text class="product-subname">成分：{{prodsinfo.comp}}</text>
      </view>
      <view class="product-title">
        <view class="sizebox">
          <text class="product-name">尺码:请选择</text>
          <text class="product-name" bind:tap="showsize">尺码指南</text>
        </view>
        <view class="sizelist">
          <view class="sizeson {{choosesize==item.size?'choose':''}}" bind:tap="choosesize" wx:for="{{prodsinfo.sizelist}}" wx:key="index" data-kucun="{{item.kucun}}" data-size="{{item.size}}">{{item.size}}</view>
        </view>
      </view>
    </view>
    <!-- 商品详情区域 -->
    <view class="detail-section">
      <view class="detail-header">
        <view class="header-title">商品详情</view>
        <view class="header-pan" bind:tap="toggle" data-tg="detail">{{toggle.detail}}</view>
      </view>
      <view class="detail-content" data-t="{{toggle.detail}}" style="{{toggle.detail=='-' ? 'display: flex;' : 'display: none;'}}">
        <!-- <image wx:for="{{imageUrls}}" src="{{item}}" wx:key="index" bind:tap="previewImage" data-index="{{index}}" mode="widthFix" /> -->
        <view class="desimg" wx:for="{{desimg}}" wx:key="index">
          <image class="img" src="{{item}}"  bind:tap="previewImage2" data-index="{{index}}" mode="widthFix" />
          <view class="desword" wx:if="{{imgdes[index][0]}}">
            <view wx:for="{{imgdes[index]}}" wx:key="index">{{item}}</view>
          </view>
        </view>
      </view>
    </view>
    <!-- 更多细节区域 -->
    <!-- <view class="detail-section">
      <view class="detail-header">
        <view class="header-title">更多细节</view>
        <view class="header-pan" bind:tap="toggle" data-tg="more">{{toggle.more}}</view>
      </view>
      <view class="detail-content" data-t="{{toggle.more}}" style="{{toggle.more=='-' ? 'display: block;' : 'display: none;'}}">
        <view class="text">
          <text>因技术局限、产品改良或生产批次等原因，线上商城中的信息可能存在色差、尺码误差或其他细节误差，线上商城展示的产品图片可能与产品实际外观不一致，以产品实物为准。</text>
        </view>
      </view>
    </view> -->
    <view style="margin-bottom: 70rpx;"></view>
    <!-- 操作按钮区域 -->
    <view class="action-buttons">
      <button class="buy-button" bind:tap="pay">兑换商品</button>
    </view>
  </view>
</view>

<!-- 自定义弹框 -->
<view wx:if="{{showModal}}" class="modal kefu">
  <view class="modal-content">
    <view class="modal-header" style="text-align: center;">
      <text>{{modalContent.title}}</text>
    </view>
    <view class="modal-body">
        <text>电话：{{setinfo.kefu}}</text>
      <image show-menu-by-longpress="true" src="{{modalContent.imageUrl}}" class="modal-image" mode="widthFix"></image>
      <view>扫码添加客服微信</view>
    </view>
    <view class="modal-footer">
      <button class="modal-btn" bindtap="close">关闭</button>
    </view>
  </view>
</view>